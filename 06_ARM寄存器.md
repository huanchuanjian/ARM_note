ARM寄存器
--------

通过阅读 **ARM架构参考手册**，可以将ARM寄存器归归类，以下2幅图，第一幅是截取手册上的，第二幅是阅读后整理的。

图1
![](http://ww3.sinaimg.cn/mw690/7fcfb6a1gw1eclprhbyucj20j60h8dih.jpg)

图2
![](http://ww4.sinaimg.cn/mw690/7fcfb6a1gw1eclprj6d4kj20kt075js1.jpg)


这里有几个需要注意的通用寄存器

* R13通常是作为 **堆栈指针**，即SP
* R14通常是作为 **连接寄存器**，即LR，R14作为连接寄存器，主要有2个功能：
	1. 在进行函数调用时，用来保存子函数的 **返回地址**
	2. 当发生异常时，比如发生中断时，在执行完中断处理函数后的 **返回地址** 也是保存在R14中的

* R15是作为 **程序计数器**，即PC

下面介绍一下状态寄存器

* 通过上面的图1，我们可以发现，当处理器模式处于 **Exception modes** 下时，才会出现SPSR，这是为什么呢？CPSR(Current Program Status Register)，当出现异常时，CPSR里面的内容会发生变化，所以我们需要使用SPSR来 **保存** CPSR里面的内容。
* 下面这张图是程序状态字的所有位

图3
![](http://ww4.sinaimg.cn/mw690/7fcfb6a1gw1eclqp9r91jj20jy03kmxl.jpg)

* N
* Z
* I
* F
* M



ARM寻址方式
------------
	
#### 什么是寻址方式？
是指处理器根据指令中给出的信息找到指令需要的 **操作数** 的方式

#### 寻址方式类型
* 立即数寻址：操作数本身就在指令中

	``` ADD R0, R0, #0x3f ;等价R0=R0+0x3f ```

* 寄存器寻址：指操作数数值是存放在寄存器中的

	``` ADD R0, R1, R2 ```

* 寄存器间接寻址：操作数是存储在内存中的，该内存对应的地址是存放在寄存器中的

	``` LDR R0, [R2] ```

* 基址变址寻址：操作时仍然是在内存中的，可以理解为 **基址（基址是保存在寄存器中的，基址寄存器）+变址（偏移量）** 

	``` LDR R0, [R1, #4] ```

* 相对寻址：PC指针的当前值为基地址，指令中的地址标号为偏移量，两者相加后就是操作数的有效地址

	```
	BL NEXT		
	......

	NEXT
	......

	MOV PC, LR

	```
